/*
  ========================================
  MAIN APPLICATION STYLESHEET
  ========================================
  This file defines fonts, design tokens, and
  base styles for the entire experience.
*/

/* stylelint-disable at-rule-no-unknown */
@tailwind base;
@tailwind components;
@tailwind utilities;
/* stylelint-enable at-rule-no-unknown */

/* 1. Font Faces --------------------------------------------------------- */
@font-face {
  font-family: 'Public Sans';
  src: url('/fonts/PublicSans-Regular.woff2') format('woff2');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Public Sans';
  src: url('/fonts/PublicSans-Bold.woff2') format('woff2');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Public Sans';
  src: url('/fonts/PublicSans-Italic.woff2') format('woff2');
  font-weight: 400;
  font-style: italic;
  font-display: swap;
}

@font-face {
  font-family: 'Public Sans';
  src: url('/fonts/PublicSans-BoldItalic.woff2') format('woff2');
  font-weight: 700;
  font-style: italic;
  font-display: swap;
}

@font-face {
  font-family: 'Lora';
  src: url('/fonts/Lora-Regular.woff2') format('woff2');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Lora';
  src: url('/fonts/Lora-Bold.woff2') format('woff2');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Fira Code';
  src: url('/fonts/FiraCode-Regular.woff2') format('woff2');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

/* 2. Design Tokens ------------------------------------------------------ */
:root,
:root[data-theme='light'] {
  --color-primary: 241 32% 36%; /* Old Glory Blue */
  --color-primary-soft: 227 45% 92%;
  --color-accent: 352 68% 42%; /* Old Glory Red */
  --color-accent-soft: 5 80% 94%;

  --color-success: 152 28% 38%;
  --color-warning: 32 70% 48%;
  --color-danger: var(--color-accent);

  --color-text: 220 16% 18%;
  --color-text-muted: 0 0% 0%;
  --color-background: 220 33% 97%;
  --color-surface: 220 30% 99%;
  --color-panel: 220 35% 95%;
  --color-border: 220 24% 86%;

  color-scheme: light;
}

:root[data-theme='dark'] {
  --color-text: 214 20% 92%;
  --color-text-muted: 214 16% 70%;
  --color-background: 214 30% 10%;
  --color-surface: 214 28% 15%;
  --color-panel: 214 26% 19%;
  --color-border: 214 20% 30%;
  --color-primary-soft: 228 24% 22%;
  --color-accent-soft: 350 35% 24%;

  color-scheme: dark;
}

:root {
  --font-family-sans: 'Public Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  --font-family-serif: 'Lora', serif;
  --font-family-mono: 'Fira Code', monospace;

  --spacing-unit: 0.25rem;
  --border-radius: 0.5rem;
  --max-width: 72rem;
}

@media (prefers-color-scheme: dark) {
  :root:not([data-theme]) {
    --color-text: 214 20% 92%;
    --color-text-muted: 214 16% 70%;
    --color-background: 214 30% 10%;
    --color-surface: 214 28% 15%;
    --color-panel: 214 26% 19%;
    --color-border: 214 20% 30%;
    --color-primary-soft: 228 24% 22%;
    --color-accent-soft: 350 35% 24%;

    color-scheme: dark;
  }
}

/* 3. Base Element Styles ------------------------------------------------ */
@layer base {
  html, body, #root {
    height: 100%;
  }

  body {
    background-color: hsl(var(--color-background));
    color: hsl(var(--color-text));
    font-family: var(--font-family-sans);
    overscroll-behavior: none;
    font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
    text-rendering: optimizeLegibility;
  }

  ::selection {
    background-color: hsla(var(--color-accent) / 0.2);
    color: hsl(var(--color-text));
  }

  :focus-visible {
    outline: 2px solid hsl(var(--color-primary));
    outline-offset: 3px;
  }

  button:focus-visible,
  a:focus-visible {
    border-radius: calc(var(--border-radius) / 1.5);
  }
}

/* 4. Custom Utility Classes -------------------------------------------- */
.non-scaling-stroke {
  stroke-width: 1px;
  vector-effect: non-scaling-stroke;
}

@layer utilities {
  .bg-app {
    background-color: hsl(var(--color-background));
  }

  .bg-surface {
    background-color: hsl(var(--color-surface));
  }

  .bg-panel {
    background-color: hsl(var(--color-panel));
  }

  .bg-primary {
    background-color: hsl(var(--color-primary));
  }

  .bg-primary-soft {
    background-color: hsl(var(--color-primary-soft));
  }

  .bg-accent-soft {
    background-color: hsl(var(--color-accent-soft));
  }

  .text-primary {
    color: hsl(var(--color-primary));
  }

  .text-accent {
    color: hsl(var(--color-accent));
  }

  .text-muted {
    color: hsl(var(--color-text-muted));
  }

  .border-soft {
    border-color: hsl(var(--color-border));
  }
}
